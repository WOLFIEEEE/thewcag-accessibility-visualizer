---
import LanguageSelector from "../components/LanguageSelector";
import { HeaderLink } from "../components/HeaderLink";
import { createLocalT } from "../lib/i18n";
import { en, ja, ko } from "./SiteLayout.lang";

interface Props {
  lang: string;
  title?: string;
  path?: string;
  description?: string;
}

const { lang, title, description, path } = Astro.props as Props;

const layoutDict = lang === "ja" ? ja : lang === "ko" ? ko : en;

const t = createLocalT(layoutDict, en);
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/a11y-visualizer/icon.svg" />
    <link rel="icon" type="image/png" sizes="16x16" href="/a11y-visualizer/icon/16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/a11y-visualizer/icon/32.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="/a11y-visualizer/icon/48.png" />
    <link rel="icon" type="image/png" sizes="128x128" href="/a11y-visualizer/icon/128.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/a11y-visualizer/icon/192.png" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title || t("title")}</title>
    <meta name="description" content={description || t("description")} />
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title || t("title")} />
    <meta property="og:description" content={description || t("description")} />
    <meta
      property="og:image"
      content="https://ymrl.github.io/a11y-visualizer/images/ogp.png"
    />
    <meta property="og:image:alt" content={t("hero.imageAlt")} />
    <meta property="og:site_name" content="TheWCAG Accessibility Visualizer" />
    <meta
      property="og:locale"
      content={lang === "ja" ? "ja_JP" : lang === "ko" ? "ko_KR" : "en_US"}
    />
    <meta name="color-scheme" content="light dark" />
  </head>
  <body
    class="bg-zinc-50 dark:bg-zinc-900 text-zinc-800 dark:text-zinc-300 transition-colors"
  >
    <div class="min-h-screen">
      <header
        class="bg-white dark:bg-zinc-900 shadow-sm border-b border-zinc-200 dark:border-zinc-700 sticky top-0 z-50 backdrop-blur-sm bg-white/95 dark:bg-zinc-900/95"
      >
        <div class="max-w-6xl mx-auto px-4 sm:px-2 lg:px-8 py-4">
          <div
            class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-1 sm:gap-4"
          >
            <HeaderLink
              lang={lang}
              title={t("title")}
              subtitle={t("subtitle")}
            />
            <div class="flex-shrink-0 self-end sm:self-auto">
              <LanguageSelector currentLang={lang} path={path} client:load />
            </div>
          </div>
        </div>
      </header>

      <main>
        <slot />
      </main>

      <footer
        class="bg-zinc-900 dark:bg-zinc-950 text-zinc-300 dark:text-zinc-400 py-12 border-t border-zinc-800 dark:border-zinc-800"
      >
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <p class="text-sm sm:text-base">
            {t("footer.copyright")}
            <span class="mx-2">•</span>
            <a
              href="https://github.com/ymrl/a11y-visualizer"
              class="text-teal-400 dark:text-teal-300 hover:text-teal-200 dark:hover:text-teal-100 underline transition-colors"
              >{t("footer.github")}</a
            >
            <span class="mx-2">•</span>
            <a
              href="https://github.com/ymrl/a11y-visualizer/blob/main/PRIVACY.md"
              class="text-teal-400 dark:text-teal-300 hover:text-teal-200 dark:hover:text-teal-100 underline transition-colors"
              >{t("footer.privacy")}</a
            >
          </p>
        </div>
      </footer>
    </div>
  </body>
</html>
